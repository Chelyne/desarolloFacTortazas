<ion-header class="ion-no-border">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/pedidos" color="primary"></ion-back-button>
    </ion-buttons>
    <ion-title color="primary">Detalles del Pedido</ion-title>
    
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="cargando" *ngIf="!tiendas">
    <div class="textoCargando">
      <ion-spinner name="crescent" color="primary"></ion-spinner>
    </div>
  </div>
  <form *ngIf="tiendas">
    <div class="tiendas" *ngFor="let tienda of tiendas">
      <ion-item color="light" lines="none" class="tituloTienda">
        <img src="../../../assets/img/TOOBY LOGO.png" alt=""> &nbsp;&nbsp;&nbsp;
        <ion-label color="primary">{{tienda.tienda}}</ion-label>
        <ion-badge slot="end" class="ion-text-right">S/. {{tienda.totalProducto  | number: '1.2'}}</ion-badge>
      </ion-item>
      <!-- <img *ngIf="tienda.logoTienda"src="{{tienda.logoTienda}}" alt="Logo de tienda">
      <img *ngIf="!tienda.logoTienda" src="../../../assets/icons svg/mercado.svg" alt="">
      <div class="datosTienda">
        <ion-label>{{tienda.tienda}}</ion-label> <hr>
      </div> -->
      <div class="estadoEnvio">
        <!-- <ion-label><span>Estado de envio: </span>{{tienda.estado | titlecase}}</ion-label> -->
        <ion-progress-bar color="primary" value="{{tienda.progress}}" buffer="{{tienda.progress}}"></ion-progress-bar>
      </div>
      <ion-card *ngFor="let producto of tienda.productos">
        <ion-row class="ion-justify-content-center ion-align-items-center">
          <ion-col class="img" size-xs="3">
            <ion-thumbnail>
              <img *ngIf="producto.img" src="{{producto.img}}" alt="">
              <img *ngIf="!producto.img" src="../../../assets/img/pet chop.png" alt="">
            </ion-thumbnail>
          </ion-col>
          <ion-col size-xs="6" class="descripcion">
            <ion-label>{{producto.nombre | titlecase}}</ion-label><br>
            <ion-badge color="light">{{producto.cantidadCompra}} {{producto.medida}}</ion-badge> &nbsp;&nbsp;&nbsp;
            <ion-badge color="light" *ngIf="producto.talla">Talla: {{producto.talla}}</ion-badge>
          </ion-col>
          <ion-col size-xs="3" class="precio">
            <ion-label>S/. {{producto.precio * producto.cantidadCompra | number: '1.2'}}</ion-label>
          </ion-col>
        </ion-row>
      </ion-card>
      <ion-row class="envio">
        <ion-col>
          <ion-item lines="none">
            <ion-icon color="primary" name="bicycle"></ion-icon>
            <ion-label>S/. {{tienda.totalEnvio | number: '1.2'}}</ion-label>
          </ion-item>
        </ion-col>
        <ion-col>
          <ion-item lines="none">
            <ion-icon color="primary" name="cash-outline"></ion-icon>
            <ion-label>S/. {{tienda.totalProducto | number: '1.2'}}</ion-label>
          </ion-item>
        </ion-col>
      </ion-row>
      <!-- <ion-item>
        <ion-label>Total de productos: </ion-label>
        <ion-label class="ion-text-right">S/. {{tienda.totalProducto | number: '1.2'}}</ion-label>
      </ion-item>
      <ion-item>
        <ion-label>Total de envio: </ion-label>
        <ion-label class="ion-text-right">S/. {{tienda.totalEnvio | number: '1.2'}}</ion-label>
      </ion-item>
      <ion-item>
        <ion-label>Total: </ion-label>
        <ion-label slot="end" class="ion-text-right">S/. {{tienda.totalProducto + tienda.totalEnvio | number: '1.2'}}</ion-label>
      </ion-item> -->
    </div>
    <div class="resumen">
      <ion-item color="light" lines="none">
        <ion-label color="primary">Resumen General</ion-label>
      </ion-item>
      <ion-item *ngFor="let data of resumen" lines="none">
        <img class="tienda" src="../../../assets/img/TOOBY LOGO.png" alt=""> &nbsp;
        <ion-label>{{data.tienda}} </ion-label>
        <ion-label class="ion-text-right">S/. {{data.envio + data.producto | number: '1.2'}}</ion-label>
      </ion-item>
      <ion-item color="light">
        <ion-icon name="grid" color="primary"></ion-icon> &nbsp;
        <ion-label>Total Pagado</ion-label>
        <ion-label class="ion-text-right">S/. {{totalPagado | number: '1.2'}}</ion-label>
      </ion-item>
    </div>
  </form>
</ion-content>
